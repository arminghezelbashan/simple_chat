(this.webpackJsonpchat_app=this.webpackJsonpchat_app||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},61:function(e,t){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o=n.n(i),a=n(29),s=n.n(a),c=(n(36),n(37),n(2)),l=n(30),u=n.n(l),d=n(3),f={bubble:{backgroundColor:"#d7d7d7",padding:"5px 10px",borderRadius:15,display:"inline-block"},bubbleUser:{backgroundColor:"#147efb",padding:"5px 10px",borderRadius:15,display:"inline-block",color:"#fff"},container:{padding:"5px 10px"},innerContainer:{display:"flex",alignItems:"center"},innerContainerUser:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},text:{},timestamp:{fontSize:10,marginLeft:5,marginRight:5,color:"#797979",whiteSpace:"nowrap"},user:{marginLeft:15,marginBottom:2,fontSize:10},userUser:{marginRight:15,marginBottom:2,fontSize:10,textAlign:"right"}};var b=function(e){var t=e.username,n=e.isUser,i=e.timestamp,o=e.message,a=e.userColor;return Object(r.jsxs)("div",{style:f.container,children:[Object(r.jsx)("div",{style:n?Object(d.a)({color:a},f.userUser):Object(d.a)({color:a},f.user),children:t}),Object(r.jsxs)("div",{style:n?f.innerContainerUser:f.innerContainer,children:[Object(r.jsx)("div",{style:n?f.bubbleUser:f.bubble,children:Object(r.jsx)("span",{style:f.text,children:o})}),Object(r.jsx)("div",{style:f.timestamp,children:i})]})]})},m={container:{backgroundColor:"rgba(255, 255, 255, 0.6)",width:"100%",height:"100%",borderRadius:25,overflowY:"auto"},innerContainer:{minHeight:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"}};var j=function(e){var t=e.messages,n=e.username,o=Object(i.createRef)();return Object(i.useEffect)((function(){o.current.scrollTop=Number.MAX_SAFE_INTEGER})),Object(r.jsx)("div",{style:m.container,ref:o,children:Object(r.jsx)("div",{style:m.innerContainer,children:function(){var e=[],i=0;return t.forEach((function(t){e.push(Object(r.jsx)(b,{message:t.message,isUser:t.username===n,username:t.username,timestamp:t.timestamp,userColor:t.color},i)),i+=1})),e}()})})},x={container:{display:"flex",padding:20,alignItems:"flex-end"},textInput:{flex:1,wrap:"soft",outline:"none",resize:"none",padding:10,borderRadius:25,maxHeight:100,backgroundColor:"rgba(255, 255, 255, 0.6)",border:"1px solid",borderColor:"#9f9f9f",fontFamily:"sans-serif"},sendButton:{marginLeft:20,borderRadius:25,width:75,outline:"none",border:"1px solid",borderColor:"#9f9f9f",color:"#fff",fontFamily:"sans-serif",height:37}};var p=function(e){var t=e.onSendMessage,n=Object(i.createRef)(),o=Object(i.useState)(""),a=Object(c.a)(o,2),s=a[0],l=a[1],u=Object(i.useState)(15),f=Object(c.a)(u,2),b=f[0],m=f[1];Object(i.useEffect)((function(){s.trim()||(m(15),l(""))}));var j=function(){t(s),l(""),m(15)};return Object(r.jsxs)("div",{style:x.container,children:[Object(r.jsx)("textarea",{style:Object(d.a)({height:b},x.textInput),value:s,placeholder:"Enter Message...",ref:n,onInput:function(){var e={":)":"\ud83d\ude01",":(":"\ud83d\ude41",":'D":"\ud83d\ude02",":'(":"\ud83d\ude22",":o":"\ud83d\ude32"},t=n.current.value;for(var r in e)t=t.replaceAll(r,e[r]);l(t),m(n.current.scrollHeight-20)},onKeyDown:function(e){13===e.which&&j()}}),Object(r.jsx)("button",{className:"sendMessageButton",style:x.sendButton,onClick:j,children:"Send"})]})},h={container:{width:"100%"},text:{padding:"10px 15px",maxWidth:"100%",wordWrap:"break-word",overflowWrap:"anywhere"}};var g=function(e){var t=e.username,n=e.isUser,i=e.color;return Object(r.jsx)("div",{style:h.container,children:Object(r.jsxs)("div",{style:Object(d.a)({color:i},h.text),children:[t,n&&" (You)"]})})},v={separator:{borderStyle:"solid",borderWidth:"1px",borderColor:"rgba(255, 255, 255, 1)",width:"90%"}};var O=function(e){return Object(r.jsx)("div",{style:v.separator})},y={container:{backgroundColor:"rgba(255, 255, 255, 0.6)",flex:1,display:"flex",flexDirection:"column",borderRadius:25,paddingTop:5,alignItems:"center",overflowY:"auto"}};var C=function(e){var t=e.users,n=e.username;return Object(r.jsx)("div",{style:y.container,children:function(){var e=[];return t.forEach((function(t){e.push(Object(r.jsx)(g,{username:t.username,isUser:t.username===n,color:t.color})),e.push(Object(r.jsx)(O,{})),1})),e.pop(),e}()})},w={container:{marginLeft:30,fontSize:14,color:"#ff1e1e"}};var S=function(e){var t=e.errorMessage;return Object(r.jsx)("span",{style:w.container,children:t})},k={chatContainer:{display:"flex",flexDirection:"column",flex:5,height:"100%"},chatHistory:{flex:1,padding:20,overflowY:"auto"},inputContainer:{},mainContainer:{width:"95%",maxWidth:960,flex:1,backgroundColor:"#cde9e8",borderRadius:25,margin:"20px 0px",overflow:"hidden",display:"flex"},screen:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#282c34"},usersContainer:{flex:2,padding:20,display:"flex"}};var E=function(e){var t=Object(i.useState)(),n=Object(c.a)(t,2),o=n[0],a=n[1],s=Object(i.useState)(""),l=Object(c.a)(s,2),d=l[0],f=l[1],b=Object(i.useState)([]),m=Object(c.a)(b,2),x=m[0],h=m[1],g=Object(i.useState)([]),v=Object(c.a)(g,2),O=v[0],y=v[1],w=Object(i.useState)(null),E=Object(c.a)(w,2),R=E[0],I=E[1];Object(i.useEffect)((function(){return a(u()("http://136.159.5.25:5133")),function(){return o.disconnect()}}),[]),Object(i.useEffect)((function(){if(o){var e=U("username");e&&o.emit("user-command",{command:"name",data:e});var t=U("color");t&&o.emit("user-command",{command:"color",data:t}),o.on("set-username",(function(e){f(e.username),M("username",e.username)})),o.on("update-messages",(function(e){return h(e)})),o.on("update-users",(function(e){return y(e)})),o.on("handle-error",(function(e){I(e),setTimeout((function(){return I(null)}),3e3)}))}}),[o]),Object(i.useEffect)((function(){if(o){var e=U("username");e&&e!==d&&o.emit("user-command",{command:"name",data:e});var t=U("color");t&&o.emit("user-command",{command:"color",data:t})}}),[d]);var U=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].trim();if(i.startsWith(t))return i.split("=")[1]}return null},M=function(e,t){document.cookie=e+"="+t+";"};return Object(r.jsx)("div",{style:k.screen,children:Object(r.jsxs)("div",{style:k.mainContainer,children:[Object(r.jsxs)("div",{style:k.chatContainer,children:[Object(r.jsx)("div",{style:k.chatHistory,children:Object(r.jsx)(j,{messages:x,username:d})}),Object(r.jsxs)("div",{style:k.inputContainer,children:[R&&Object(r.jsx)(S,{errorMessage:R}),Object(r.jsx)(p,{onSendMessage:function(e){if("/"===e[0]){var t=e.split(" ")[0].substring(1),n=e.substring(t.length+1).trim();o.emit("user-command",{command:t,data:n}),"color"===t&&M("color",n)}else o.emit("send-message",{message:e})}})]})]}),Object(r.jsx)("div",{style:k.usersContainer,children:Object(r.jsx)(C,{users:O,username:d})})]})})};var R=function(){return Object(r.jsx)(E,{})};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(R,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.c9b740d0.chunk.js.map